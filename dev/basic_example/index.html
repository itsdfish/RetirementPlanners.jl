<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic Example · RetirementPlanners</title><meta name="title" content="Basic Example · RetirementPlanners"/><meta property="og:title" content="Basic Example · RetirementPlanners"/><meta property="twitter:title" content="Basic Example · RetirementPlanners"/><meta name="description" content="Documentation for RetirementPlanners."/><meta property="og:description" content="Documentation for RetirementPlanners."/><meta property="twitter:description" content="Documentation for RetirementPlanners."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="https://fonts.googleapis.com/css?family=Montserrat|Source+Code+Pro&amp;display=swap" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="RetirementPlanners logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">RetirementPlanners</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Basic Example</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#API"><span>API</span></a></li><li><a class="tocitem" href="#Transaction"><span>Transaction</span></a></li><li><a class="tocitem" href="#Required-Parameters"><span>Required Parameters</span></a></li><li><a class="tocitem" href="#Optional-Update-Functions"><span>Optional Update Functions</span></a></li><li><a class="tocitem" href="#Optional-Update-Function-Parameters"><span>Optional Update Function Parameters</span></a></li><li class="toplevel"><a class="tocitem" href="#Example"><span>Example</span></a></li><li><a class="tocitem" href="#Load-Packages"><span>Load Packages</span></a></li><li><a class="tocitem" href="#Configure-Simulation"><span>Configure Simulation</span></a></li><li><a class="tocitem" href="#Construct-Model"><span>Construct Model</span></a></li><li><a class="tocitem" href="#Setup-Logger"><span>Setup Logger</span></a></li><li><a class="tocitem" href="#Run-Simulation"><span>Run Simulation</span></a></li><li><a class="tocitem" href="#Visualize-the-Results"><span>Visualize the Results</span></a></li></ul></li><li><a class="tocitem" href="../advanced_example/">Advanced Example</a></li></ul></li><li><a class="tocitem" href="../plotting/">Plotting</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Basic Example</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Basic Example</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/itsdfish/RetirementPlanners.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/itsdfish/RetirementPlanners.jl/blob/main/docs/src/basic_example.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h1><p>The purpose of this example is to demonstrate how to use <code>RetirementPlanners.jl</code> with a simple, retirement simulation. Our focus on a simple simulation will have the benifit of making the API clear, but will not result in in a valid stress test of your retirement plan. For more realistic examples, please read the documentation for the <a href="../advanced_example/">advanced example</a>. </p><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><p>In this section, we will provide an overview of the API for configuring a retirement simulation. As detailed below, some parameters require user input, whereas other parameters have default values which can optionally be overwritten with your desired values. </p><h2 id="Transaction"><a class="docs-heading-anchor" href="#Transaction">Transaction</a><a id="Transaction-1"></a><a class="docs-heading-anchor-permalink" href="#Transaction" title="Permalink"></a></h2><p>The transfer of money to and from investments is scheduled through an object called <code>Transaction</code>, which contains the following fields:</p><ul><li><code>start_age = 0.0</code>: the age at which a series of transactions begin</li><li><code>end_age = Inf</code>: the age at which a series of transactions end</li><li><code>amount</code>: the amount of each transaction</li></ul><p>To schedule multiple transactions across time, you may specify a vector of <code>Transaction</code> objects, which can be useful when, for example, you have multiple income sources occuring at different times (e.g., social security, pension, rent income etc.). The function <code>transact</code> will carry out the transaction at allowable times. By default, the <code>RetirementPlanners</code> supports transaction for real numbers, probability distributions, and a few adaptive rules described below. You can create your own type and method for <code>transact</code> to implement a custom strategy. </p><h2 id="Required-Parameters"><a class="docs-heading-anchor" href="#Required-Parameters">Required Parameters</a><a id="Required-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Required-Parameters" title="Permalink"></a></h2><p>The model requires numerous parameters to control the timing of events and the initial value of the investment. The required parameters are as follows:</p><ul><li><code>Δt</code>: the time step in years </li><li><code>start_age</code>: your age in years at the beginning of the simulation</li><li><code>duration</code>: the number of years to simulate</li><li><code>start_amount</code>: the amount of money you have in investments at the beginning of the simulation</li></ul><h2 id="Optional-Update-Functions"><a class="docs-heading-anchor" href="#Optional-Update-Functions">Optional Update Functions</a><a id="Optional-Update-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Optional-Update-Functions" title="Permalink"></a></h2><p>The discrete time simulation is governed by seven update functions, which are executed on each time step:</p><ul><li><code>withdraw!</code>: a function called on each time step to withdraw from investments </li><li><code>invest!</code>: a function called on each time step to invest money into investments </li><li><code>update_income!</code>: a function called on each time step to update income sources </li><li><code>update_inflation!</code>: a function called on each time step to compute inflation </li><li><code>update_market!</code>: a function called on each time step to simulate the stock market</li><li><code>update_investments!</code>: a function called on each time step to compute the total value of the investments</li><li><code>log!</code>: a function called on each time step to log data</li></ul><p>Each function is assigned a default method with default arguments. Note that in advanced applications, you can specify a new model type and <code>update!</code> to execute a different sequence of update functions. The update functions listed above will suffice for a wide range of use cases.</p><h2 id="Optional-Update-Function-Parameters"><a class="docs-heading-anchor" href="#Optional-Update-Function-Parameters">Optional Update Function Parameters</a><a id="Optional-Update-Function-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Optional-Update-Function-Parameters" title="Permalink"></a></h2><p>Each update function described in the previous section has default parameter values which can be overwritten. For example, we could specify a set of parameters <code>kw_income = (X₁ = x₁, X₂ = x₂, ..., Xₙ = xₙ)</code> to pass the function <code>update_income!</code>. The keyword for each update function is given below: </p><ul><li><code>kw_income</code>: optional keyword arguments passed to <code>update_income!</code></li><li><code>kw_withdraw</code>: optional keyword arguments passed to <code>withdraw!</code></li><li><code>kw_invest</code>: optional keyword arguments passed to <code>invest!</code></li><li><code>kw_inflation</code>: optional keyword arguments passed to <code>update_inflation!</code></li><li><code>kw_interest</code>: optional keyword arguments passed to <code>update_market!</code> </li><li><code>kw_net_worth</code>: optional keyword arguments passed to <code>update_investments!</code></li><li><code>kw_log</code>: optional keyword arguments passed to <code>log!</code></li></ul><h1 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h1><p>Now that we have explained the API for configuring simulations, we are now in the position to develop a simple, retirement simulation based on the following scenario:</p><p><em>Let&#39;s assume that you are 27 years old with an initial investment of <code>$</code>10,000, and you invest <code>$</code>625 each month until early retirement at age 60. Assume further that the yearly interest rate on investments is .07, and inflation is .035. Upon reaching 60 years old, we will assume you will withdraw <code>$</code>2,200 per month until reaching age 85.</em></p><h2 id="Load-Packages"><a class="docs-heading-anchor" href="#Load-Packages">Load Packages</a><a id="Load-Packages-1"></a><a class="docs-heading-anchor-permalink" href="#Load-Packages" title="Permalink"></a></h2><p>The first step is to load the required packages. The code block below loads the package <code>RetirementPlanners</code> to configure and run the retirement simulation, and the package <code>Plots</code> to visualize the results. </p><pre><code class="language-julia hljs">using RetirementPlanners
using Plots</code></pre><h2 id="Configure-Simulation"><a class="docs-heading-anchor" href="#Configure-Simulation">Configure Simulation</a><a id="Configure-Simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Configure-Simulation" title="Permalink"></a></h2><p>In this section, we will configure the simulation based on the scenario described above. As shown below, all of the configuration details will be defined in a data structure named <code>config</code>.</p><h3 id="Required-Parameters-2"><a class="docs-heading-anchor" href="#Required-Parameters-2">Required Parameters</a><a class="docs-heading-anchor-permalink" href="#Required-Parameters-2" title="Permalink"></a></h3><p>Based on the scenario above, we will use the following required parameters: </p><ul><li><code>Δt</code>: <span>$\frac{1}{12}$</span></li><li><code>start_age</code>: <span>$27$</span></li><li><code>duration</code>: <span>$58$</span></li><li><code>start_amount</code>: &#39;<span>$&#39;$</span>10,000$</li></ul><h3 id="Optional-Update-Functions-2"><a class="docs-heading-anchor" href="#Optional-Update-Functions-2">Optional Update Functions</a><a class="docs-heading-anchor-permalink" href="#Optional-Update-Functions-2" title="Permalink"></a></h3><p>In this simple simulation, we use several, simple update functions pre-fixed with the word <code>fixed</code>. As the names suggest, these simplified functions use fixed quantities in the simulation. However, for <code>update_investments!</code> and <code>log!</code>, we will use the default update functions. Each update function is described below:</p><ul><li><code>fixed_withdraw</code>: withdraw a fixed amount from investments on each time step starting at a specified age</li><li><code>invest!</code>: invest a specified amount on each time step until a specified age is reached. In this case, we will invest a fixed     amount</li><li><code>fixed_income</code>: recieve specified income (e.g., social security, or pension) on each time step starting at a specified age</li><li><code>fixed_inflation</code>: a fixed yearly inflation rate used to adjust interest (i.e., growth) earned on investments</li><li><code>fixed_interest</code>: a fixed yearly interest rate earned on intestments </li><li><code>update_investments!</code>: computes total value of investments on each time step based on inflation, interest, investments, and withdraws. </li><li><code>default_log!</code>: records interest rate, inflation rate, and net worth on each time step</li></ul><p>Note: you can view additional documentation for the update functions above via <code>? function_name</code> in the REPL, or by referencing the <a href="./api.md/#Update-Methods">API</a>.</p><h3 id="Optional-Update-Function-Parameters-2"><a class="docs-heading-anchor" href="#Optional-Update-Function-Parameters-2">Optional Update Function Parameters</a><a class="docs-heading-anchor-permalink" href="#Optional-Update-Function-Parameters-2" title="Permalink"></a></h3><p>Putting all of this information together, we get the following configuration:</p><pre><code class="language-julia hljs">config = (
    # time step in years
    Δt = 1 / 12,
    # starting age of simulation
    start_age = 25,
    # duration of simulation
    duration = 58,
    # initial investment amount
    start_amount = 10_000,
    # function for simulating growth in the market
    update_market! = fixed_market,
    # interest parameters
    kw_market = (interest_rate = 0.07,),
    # function for updating inflation
    update_inflation! = fixed_inflation,
    # inflation parameters
    kw_inflation = (inflation_rate = 0.035,),
    # invest parameters
    kw_invest = (investments = Transaction(; end_age = 60, amount = 625),),
    # withdraw parameters
    kw_withdraw = (withdraws = Transaction(; start_age = 60, amount = 2200),)
)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(Δt = 0.08333333333333333, start_age = 25, duration = 58, start_amount = 10000, update_market! = RetirementPlanners.fixed_market, kw_market = (interest_rate = 0.07,), update_inflation! = RetirementPlanners.fixed_inflation, kw_inflation = (inflation_rate = 0.035,), kw_invest = (investments = Transaction{Float64, Int64}(0.0, 60.0, 625),), kw_withdraw = (withdraws = Transaction{Float64, Int64}(60.0, Inf, 2200),))</code></pre><h2 id="Construct-Model"><a class="docs-heading-anchor" href="#Construct-Model">Construct Model</a><a id="Construct-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Construct-Model" title="Permalink"></a></h2><p>Now that the model settings have been configured, we can create the model. To do so, we will pass the configuration settings to the model constructor. </p><pre><code class="language-julia hljs">model = Model(; config...)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">Model
┌─────────────────────┬─────────────────────────────────────────────────────────
│ Field               │ Value                                                  ⋯
├─────────────────────┼─────────────────────────────────────────────────────────
│ Δt                  │  0.08                                                  ⋯
│ duration            │ 58.00                                                  ⋯
│ start_age           │ 25.00                                                  ⋯
│ start_amount        │ 10000.00                                               ⋯
│ state               │ State{Float64}(0.0, 0.0, 0.0, 0.0, 0.0, 0.0)           ⋯
│ withdraw!           │ withdraw!                                              ⋯
│ invest!             │ invest!                                                ⋯
│ update_income!      │ update_income!                                         ⋯
│ update_inflation!   │ fixed_inflation                                        ⋯
│ update_market!      │ fixed_market                                           ⋯
│ update_investments! │ update_investments!                                    ⋯
│ log!                │ default_log!                                           ⋯
│ config              │ (kw_market = (interest_rate = 0.07,), kw_inflation = ( ⋯
└─────────────────────┴─────────────────────────────────────────────────────────
<span class="sgr36">                                                                1 column omitted
</span></span></code></pre><p>The output above summarizes the configuration of the <code>Model</code> object. First, we can see the provided inputs at the top of the table. The field called <code>state</code> stores current values of the system for each time step, including investment amount, and net worth. You can see the details of the <code>State</code> object by expanding the menu below.</p><details>
<summary><b>Show State</b></summary><pre><code class="language-julia hljs">model.state</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">State
┌─────────────────┬───────┐
│ Field           │ Value │
├─────────────────┼───────┤
│ interest_rate   │  0.00 │
│ inflation_rate  │  0.00 │
│ income_amount   │  0.00 │
│ invest_amount   │  0.00 │
│ withdraw_amount │  0.00 │
│ net_worth       │  0.00 │
└─────────────────┴───────┘
</span></code></pre></details><h2 id="Setup-Logger"><a class="docs-heading-anchor" href="#Setup-Logger">Setup Logger</a><a id="Setup-Logger-1"></a><a class="docs-heading-anchor-permalink" href="#Setup-Logger" title="Permalink"></a></h2><p>The next step is to initialize the data logger. On each time step, the data logger stores the following quantities: </p><ul><li>annualized interest rate</li><li>annualized inflation rate</li><li>net worth</li><li>income summed across all sources</li></ul><p>The <code>Logger</code> object requires two inputs: </p><ul><li><code>n_steps</code>: the total number of time steps in one simulation</li><li><code>n_reps</code>: the total repetitions of the simulation. </li></ul><p>The total number of time steps can be found by getting the length of the time steps. In this simple scenario, we will set <code>n_reps=1</code> because the simulation is deterministic (i.e., it provides the same result each time). </p><pre><code class="language-julia hljs">times = get_times(model)
n_steps = length(times)
n_reps = 1
logger = Logger(; n_reps, n_steps)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">Logger
┌──────────────┬────────────────────────────┐
│ Field        │ Value                      │
├──────────────┼────────────────────────────┤
│ net_worth    │ [0.0; 0.0; … ; 0.0; 0.0;;] │
│ interest     │ [0.0; 0.0; … ; 0.0; 0.0;;] │
│ inflation    │ [0.0; 0.0; … ; 0.0; 0.0;;] │
│ total_income │ [0.0; 0.0; … ; 0.0; 0.0;;] │
└──────────────┴────────────────────────────┘
</span></code></pre><h2 id="Run-Simulation"><a class="docs-heading-anchor" href="#Run-Simulation">Run Simulation</a><a id="Run-Simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Run-Simulation" title="Permalink"></a></h2><p>Now that we have specified the parameters of the simulation, we can use the function <code>simulate!</code> to generate quantities of interest and save them to the <code>Logger</code> object. As shown below, <code>simulate!</code> requires our <code>Model</code> object, <code>Logger</code> object, and the number of repetitions, <code>n_reps</code>. </p><pre><code class="language-julia hljs">simulate!(model, logger, n_reps)</code></pre><h2 id="Visualize-the-Results"><a class="docs-heading-anchor" href="#Visualize-the-Results">Visualize the Results</a><a id="Visualize-the-Results-1"></a><a class="docs-heading-anchor-permalink" href="#Visualize-the-Results" title="Permalink"></a></h2><p>The code block below plots net worth as a function of age. The time steps are contained in <code>times</code> and net worth is contained within the <code>Logger</code> object. </p><pre><code class="language-julia hljs">plot(times, logger.net_worth, grid=false, label=false, xlabel=&quot;Age&quot;, ylabel=&quot;Net Worth&quot;)</code></pre><img src="2756922e.svg" alt="Example block output"/><p>Based on the assumptions we have made, you will have <code>$</code>219,771 remaining in investments at age 85. Needless to say, this simulation is too simplistic stress test your financial situation. Perhaps the most significant limitation is that is deterministic: investments, withdraws, infation, and interest are fixed throughout. In actuality, these values vary across time, thus introducing uncertainty into the planning process. The <a href="../advanced_example/">advanced example</a> will show you how to introduce random variables into the simulation to account for various sources of uncertainty.</p><details>
<summary><b>All Code</b></summary><pre><code class="language-julia hljs">using RetirementPlanners
using Plots

config = (
    # time step in years
    Δt = 1 / 12,
    # starting age of simulation
    start_age = 25,
    # duration of simulation
    duration = 58,
    # initial investment amount 
    start_amount = 10_000,
    # function for simulating growth in the market
    update_market! = fixed_market,
    # interest parameters
    kw_market = (interest_rate = 0.07,),
    # function for updating inflation
    update_inflation! = fixed_inflation,
    # inflation parameters
    kw_inflation = (inflation_rate = 0.035,),
    # invest parameters
    kw_invest = (investments = Transaction(; end_age = 60, amount = 625),),
    # withdraw parameters 
    kw_withdraw = (withdraws = Transaction(; start_age = 60, amount = 2200),)
)

model = Model(; config...)

times = get_times(model)
n_steps = length(times)
n_reps = 1
logger = Logger(; n_reps, n_steps)

simulate!(model, logger, n_reps)

plot(
    times,
    logger.net_worth,
    grid = false,
    label = false,
    xlabel = &quot;Age&quot;,
    ylabel = &quot;Net Worth&quot;
)</code></pre></details></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../advanced_example/">Advanced Example »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Sunday 12 May 2024 11:44">Sunday 12 May 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
